{%- block vich_file_row -%}
    {%- set force_error = true -%}
    {{- block('form_row') -}}
{%- endblock -%}

{%- block vich_file_widget -%}
    <div class="vich-file">
        {{- form_widget(form.file) -}}
        {%- if form.delete is defined or download_uri -%}
        <div class="d-flex flex-row align-items-center justify-content-start mt-2">
            {%- if download_uri -%}
                <a href="{{ asset_helper is same as(true) ? asset(download_uri) : download_uri }}" download class="btn btn-secondary btn-sm me-2">
                    {{ translation_domain is same as(false) ? download_label : download_label|trans({}, translation_domain) }}
                </a>
            {%- endif -%}
            {%- if form.delete is defined -%}
                {{- form_row(form.delete, {label: 'Retirer ?', row_attr: {'class': 'mb-0'}, label_attr: {'class': 'checkbox-custom'}}) -}}
            {%- endif -%}
        </div>
        {%- endif -%}
    </div>
{%- endblock -%}

{%- block vich_image_row -%}
    {%- set force_error = true -%}
    {{- block('form_row') -}}
{%- endblock -%}

{%- block vich_image_widget -%}
    <div class="vich-image">
        {{- form_widget(form.file) -}}
        {%- if image_uri -%}
            <a href="{{ image_uri }}" target="_blank">
                <img src="{{ image_uri|imagine_filter('thumbnail') }}" alt="" class="mt-2 shadow-sm" />
            </a>
        {%- endif -%}
        {%- if form.delete is defined -%}
            {{- form_row(form.delete, {label: 'Retirer ?', row_attr: {'class': 'mb-0'}, label_attr: {'class': 'checkbox-custom'}}) -}}
        {%- endif -%}
    </div>
{%- endblock -%}

{% block _event_timeslots_timeSlots_entry_widget %}
    <div class="row">
        <div class="col-6">
            {{ form_row(form.startAt) }}
        </div>
        <div class="col-6">
            {{ form_row(form.endAt) }}
        </div>
    </div>
{% endblock %}

{% block _event_timeslots_timeSlots_entry_workshops_entry_widget %}
    <div class="row">
        <div class="col-6">
            {{ form_row(form.workshop) }}
        </div>
        <div class="col-6">
            {{ form_row(form.nbGuests) }}
        </div>
    </div>
{% endblock %}

{% block ux_collection_widget %}
    {% apply spaceless %}
        {% if prototype is defined %}
            {% set attr = attr|merge({'data-prototype': form_row(prototype)}) %}
            {% set attr = attr|merge({'data-prototype-name': prototype.vars.name}) %}
        {% endif %}
        {% set attr = attr|merge({'data-allow-add': allow_add ? 1 : 0}) %}
        {% set attr = attr|merge({'data-allow-remove': allow_delete ? 1 : 0 }) %}
        {% set attr = attr|merge({'data-name-prefix': full_name}) %}
        {% set attr = attr|merge({'class': attr.class|default('collection arkounay-ux-collection')}) %}
        {% set attr = attr|merge({'data-controller': (attr['data-controller']|default('') ~ ' arkounay--ux-collection--collection')|trim}) %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-allow-drag-and-drop-value': allow_drag_and_drop}) %}
        {% if drag_and_drop_filter is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-drag-and-drop-filter-value': drag_and_drop_filter}) %}
        {% endif %}
        {% if drag_and_drop_prevent_on_filter is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-drag-and-drop-prevent-on-filter-value': drag_and_drop_prevent_on_filter|json_encode}) %}
        {% endif %}
        {% if position_selector|default(false) %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-position-selector-value': position_selector}) %}
        {% endif %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-display-sort-buttons-value': display_sort_buttons|json_encode}) %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-min-value': min}) %}
        {% if max is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-max-value': max}) %}
        {% endif %}

        <div {{ block('widget_container_attributes') }}>
            {%- if form is rootform -%}
                {{ form_errors(form) }}
            {%- endif -%}
            {{- block('form_rows') -}}
            {{- form_rest(form) -}}

            {% if allow_add %}
                <div class="mb-3">
                    <button class="btn btn-primary btn-sm collection-add" data-arkounay--ux-collection--collection-target="add" data-action="arkounay--ux-collection--collection#add">
                        <i class="fas fa-plus me-1"></i>
                        {{ (add_label|default('Add'))|trans }}
                    </button>
                </div>
            {% endif %}
        </div>
    {% endapply %}
{% endblock %}

{% block _event_workshops_widget %}
    {% apply spaceless %}
        {% if prototype is defined %}
            {% set attr = attr|merge({'data-prototype': form_row(prototype)}) %}
            {% set attr = attr|merge({'data-prototype-name': prototype.vars.name}) %}
        {% endif %}
        {% set attr = attr|merge({'data-allow-add': allow_add ? 1 : 0}) %}
        {% set attr = attr|merge({'data-allow-remove': allow_delete ? 1 : 0 }) %}
        {% set attr = attr|merge({'data-name-prefix': full_name}) %}
        {% set attr = attr|merge({'class': attr.class|default('collection arkounay-ux-collection')}) %}
        {% set attr = attr|merge({'data-controller': (attr['data-controller']|default('') ~ ' arkounay--ux-collection--collection')|trim}) %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-allow-drag-and-drop-value': allow_drag_and_drop}) %}
        {% if drag_and_drop_filter is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-drag-and-drop-filter-value': drag_and_drop_filter}) %}
        {% endif %}
        {% if drag_and_drop_prevent_on_filter is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-drag-and-drop-prevent-on-filter-value': drag_and_drop_prevent_on_filter|json_encode}) %}
        {% endif %}
        {% if position_selector|default(false) %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-position-selector-value': position_selector}) %}
        {% endif %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-display-sort-buttons-value': display_sort_buttons|json_encode}) %}
        {% set attr = attr|merge({'data-arkounay--ux-collection--collection-min-value': min}) %}
        {% if max is not null %}
            {% set attr = attr|merge({'data-arkounay--ux-collection--collection-max-value': max}) %}
        {% endif %}

        <div {{ block('widget_container_attributes') }}>
            {%- if form is rootform -%}
                {{ form_errors(form) }}
            {%- endif -%}
            {{- block('form_rows') -}}
            {{- form_rest(form) -}}

            {% if allow_add %}
                <div class="mb-3">
                    <button class="btn btn-primary btn-sm collection-add" data-arkounay--ux-collection--collection-target="add" data-action="arkounay--ux-collection--collection#add">
                        <i class="fas fa-plus me-1"></i>
                        {{ (add_label|default('Add'))|trans }}
                    </button>
                </div>
            {% endif %}
        </div>
    {% endapply %}
{% endblock %}

{% block phone_widget %}
    {{ block('form_widget_simple') }}
    {{ encore_entry_script_tags('cleave') }}
    <script>
      var cleave = new Cleave('#{{ id }}', {
        phone: true,
        phoneRegionCode: 'FR'
      })
    </script>
{% endblock %}

{%- block choice_widget_expanded -%}
    {%- if form.vars.id == 'guest_momentChoices' -%}
        <div id="{{ id }}" class="d-flex flex-wrap">
            {%- for child in form %}
                <div class="form-check me-4">
                    {{- form_widget(child, {
                        'attr': {
                            'class': 'form-check-input'
                        }
                    }) -}}
                    {{- form_label(child, null, {
                        'label_attr': {
                            'class': 'form-check-label'
                        }
                    }) -}}
                </div>
            {%- endfor -%}
        </div>
    {%- else -%}
        {{- block('choice_widget_expanded', 'bootstrap_5_layout.html.twig') -}}
    {%- endif -%}
{%- endblock choice_widget_expanded -%}